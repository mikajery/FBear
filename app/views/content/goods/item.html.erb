<div class="b-product" data-action="product">
  <div class="shadow"></div>

  <div class="media-dismiss" data-product-dismiss="media">
    <i class="control control-dismiss"></i>
  </div>

  <div class="loading-wrap" data-product="loading">
    <div class="loading">
      <div class="wrap">
        <div class="loader">
          <%= image_tag "content/product-loader.gif" %>
        </div>
        Please wait
      </div>
    </div>
  </div>

  <div class="product-content" data-product="content">
    <div class="media main-pic" data-product-cover="<%= @good.pictures.to_json %>">
      <div data-cover="retina_landscape" style="background-position: <%= @good.picture_alignment || 'center' %>"></div>
      <div data-cover="retina_portrait" style="background-position: <%= @good.picture_alignment || 'center' %>"></div>
      <div class="hide-on-tablets show-on-desktop" data-cover="desktop" style="background-position: <%= @good.picture_alignment || 'center' %>"></div>
      <div class="show-on-landscape" data-cover="landscape" style="background-position: <%= @good.picture_alignment || 'center' %>"></div>
      <div class="show-on-portrait" data-cover="portrait" style="background-position: <%= @good.picture_alignment || 'center' %>"></div>
    </div>

    <% if @good.three60s %>
      <div class="media three60" data-product-media="360">
        <div class="padder">
          <ul class="b-thumbs">
            <% @good.three60s.each_with_index do |t, i| %>
              <li data-show="threesixty<%= i %>">
                <%= image_tag t.src.url(:thumb) %>
              </li>
            <% end %>
          </ul>
        </div>

        <div class="three60-viewer" data-type="viewer" data-viewer="360">
          <% @good.three60s.each_with_index do |t, i| %>
            <script type="text/javascript">
              var frames<%= i %> = [
                <%= raw t.items.map{|f| '\'' + f.src.url(:preview) + "'"}.join "," %>
              ];
            </script>

            <div class="threesixty" data-type="threesixty" data-threesixty="threesixty<%= i %>" data-threesixty-frames="frames<%= i %>" data-threesixty-spinner="threesixty-spinner-<%= i %>">
              <div class="threesixty-spinner" id="threesixty-spinner-<%= i %>" data-threesixty="spinner">
                <span>0%</span>
              </div>

              <ol class="threesixty-images" data-threesixty="images"></ol>
            </div>
          <% end %>
        </div>
      </div>
    <% end %>

    <% unless @good.vimeo.empty? %>
      <div class="media video" data-product-media="video">
        <%= @good.vimeo.html_safe %>
      </div>
    <% end %>

    <% if @good.panorama.file? %>
      <div class="media pan" data-product-media="pan">
        <% if @good.panorama_ipad.file? %>
          <div class="hide-on-tablets show-on-desktop">
        <% end %>

          <%= image_tag @good.panorama %>

        <% if @good.panorama_ipad.file? %>
          </div>

          <div class="hide-on-desktop show-on-tablets">
            <%= image_tag @good.panorama_ipad %>
          </div>
        <% end %>
      </div>
    <% end %>

    <div class="padder">
      <div class="info">
          <div class="info-block">
            <div class="controls">
              <div class="shadow"></div>

              <div class="price">
                <%= @good.price %>
              </div>

              <div class="b-farrow small">
                <div class="line l"></div>
                <div class="line r"></div>
                <div class="tip"></div>
              </div>

              <div class="buy">
                <%= simple_form_for @good, url: cart_buy_path, method: :post do |f| %>
                  <%= f.input :id, as: :hidden %>

                  <%= content_tag :button, '', type: :submit %>
                <% end %>
                  
                  
                </form>
              </div>
            </div>

            <div class="description" data-product="description" data-product-toggle="description">
              <div class="opener">
                <i class="control control-up"></i>
                <i class="control control-down"></i>
              </div>

              <div class="short">
                <div class="logo">
                  <%= image_tag @good.logo %>
                </div>

                <%= @good.announce.html_safe if @good.announce %>

                <div class="b-farrow">
                  <div class="line l"></div>
                  <div class="line r"></div>
                  <div class="tip"></div>
                </div>
              </div>

              <div class="long" data-action="scrollbar">
              
                <% if @good.content %>
                  <div class="block">
                    <div class="title">Спецификация</div>
                    <%= @good.content.html_safe %>
                  </div>
                <% end %>

                <div class="block">
                  <div class="title">
                    Материалы
                  </div>

                  Мебель производится на ультра современном оборудовании, с использованием только высококачественных и натуральных материалов.
                </div>

                <div class="block">
                  <ul class="b-thumbs">
                    <% @good.material.each do |m| %>
                      <li>
                        <%= m.title %>
                        <%= image_tag m.picture.url(:thumb) %>
                      </li>
                    <% end %>
                  </ul>
                </div>

                <% if @good.additional %>
                  <div class="block">
                    <div class="title">Дополнительно</div>
                    <%= @good.additional.html_safe %>
                  </div>
                <% end %>

              </div>
            <div>
          </div>
        </div>
      </div>

      <div class="info-block">

        <ul class="features">
          <% unless @good.vimeo.empty? %>
            <li data-product-media="video">
              <i class="product-icon icon-video"></i><span>Видео</span>
            </li>
          <% end %>

          <% unless @good.three60s.empty? %>
            <li data-product-media="360">
              <i class="product-icon icon-360"></i><span>360 просмотр</span>
            </li>
          <% end %>

          <% if @good.panorama.file? %>
            <li data-product-media="pan">
              <i class="product-icon icon-pan"></i><span>Панорама</span>
            </li>
          <% end %>

        </ul>
      </div>
    </div>
  </div>
</div>