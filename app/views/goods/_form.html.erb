<%= language_prompt %>

<%= simple_form_for @good, :html => { :class => 'form-horizontal' } do |f| %>
  <%= form_errors f %>

  <%= tabs [[:main, 'Основное'], [:logo, 'Лого'], [:picture, 'Изображение'], [:tech, 'Характеристики'], 
      [:descriptions, 'Описания'], 
      [:pdfs, 'PDF'], 
      [:three60, '360-просмотр'], 
      [:video, 'Видео'], 
      [:panorama, 'Панорама'], 
      [:descriptions, 'Описания'], 
      [:meta, 'META']] %>

  <%= tab_contents do %>
    <%= tab_pane :main, {active: true} do %>
      <%= f.input :name %>

      <%= f.input :slug if @good.id? %>

      <% Globalize.with_locale(@locale.slug) do %>
        <%= f.input :price %>
      <% end %>

      <%= f.association :good_category %>
      <%= f.association :designer %>
      <%= f.association :material %>
    <% end %>

    <%= tab_pane :logo do %>
      <%= image_field @good, 'logo', f, [300, 300], transparent: true %>
    <% end %>

    <%= tab_pane :pdfs do %>
      <% if @good.pdfs.empty? %>
        <div class="well">
          Опаньки.. Ни одного PDF-файла не найдено..
        </div>
      <% else %>
        <table class="table table-hover">
          <thead>
            <tr>
              <th>
                Файл
              </th>
              <th width="30%" class="center">
                Размер
              </th>
              <th width="60px">
              </th>
            </tr>
          </thead>
          <tbody>
            <% @good.pdfs.each do |pdf| %>
              <tr>
                <td>
                  <i class="icon icon-file"></i> <%= pdf.name %>
                  <%= content_tag :div, content_tag(:small, pdf.filename), class: 'muted' if pdf.src %>
                </td>
                <td class="center">
                  <%= number_to_human_size pdf.size %>
                </td>
                <td>
                  <%= link_to pencil_icon,
                      edit_pdf_path(pdf), :class => 'btn btn-mini' %>
                  <%= link_to trash_icon(true),
                      pdf_path(pdf),
                      :method => :delete,
                      :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                      :class => 'btn btn-mini btn-danger' %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      <% end %>

      <a href="<%= new_good_pdf_path @good %>" class="btn">
        <i class="icon-file"></i> Добавить файл
      </a>

    <% end %>

    <%= tab_pane :three60 do %>
      <% if @good.three60s.empty? %>
        <div class="well">
          Опаньки.. Ни одного 3D-просмотра не найдено..
        </div>
      <% else %>
        <table class="table table-hover">
          <thead>
            <tr>
              <th>
                Файл
              </th>
              <th class="center">
                Кадров
              </th>
              <th width="60px">
              </th>
            </tr>
          </thead>
          <tbody>
            <% @good.three60s.each do |three60| %>
              <tr>
                <td>
                  <%= with_pic three60, three60.src %>
                </td>
                <td class="center">
                  <%= three60.items.size %>
                </td>
                <td>
                  <%= link_to pencil_icon,
                      edit_three60_path(three60), :class => 'btn btn-mini' %>
                  <%= link_to trash_icon(true),
                      three60_path(three60),
                      :method => :delete,
                      :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                      :class => 'btn btn-mini btn-danger' %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      <% end %>

      <a href="<%= new_good_three60_path @good %>" class="btn">
        <i class="icon icon-book"></i> Добавить 3D-просмотр
      </a>      
    <% end %>

    <%= tab_pane :video do %>
      
    <% end %>

    <%= tab_pane :panorama do %>
      <%= image_field @good, 'panorama', f, [300, 300], transparent: true %>
    <% end %>


    <%= tab_pane :logo do %>
      <%= image_field @good, 'logo', f, [300, 300], transparent: true %>
    <% end %>



    <%= tab_pane :picture do %>
      <%= image_field @good, 'picture', f, [300, 300] %>
    <% end %>

    <%= tab_pane :meta do %>
      <% Globalize.with_locale(@locale.slug) do %>
        <%= f.input :title %>
        <%= f.input :heading %>
        <%= f.input :keywords %>
        <%= f.input :description %>
      <% end %>
    <% end %>

    <%= tab_pane :tech do %>
      <%= f.input :width %>
      <%= f.input :height %>
      <%= f.input :depth %>
      <%= f.input :box_width %>
      <%= f.input :box_height %>
      <%= f.input :box_depth %>

      <%= f.input :is_electrical %>
    <% end %>

    <%= tab_pane :descriptions do %>
      <% Globalize.with_locale(@locale.slug) do %>
        <%= f.input :announce %>
        <%= f.input :content %>
        <%= f.input :additional %>
      <% end %>
    <% end %>
  <% end %>

  <%= language_input f %>

  <div class="form-actions">
    <%= f.button :submit, save_or_update(@good), :class => 'btn-primary' %>
    <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                good_categories_path, :class => 'btn' %>
  </div>
<% end %>
